"use strict";(globalThis.webpackChunkdoc_performance_colaboradores_api=globalThis.webpackChunkdoc_performance_colaboradores_api||[]).push([[7026],{8453:(e,s,r)=>{r.d(s,{R:()=>o,x:()=>i});var d=r(6540);const a={},n=d.createContext(a);function o(e){const s=d.useContext(n);return d.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function i(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:o(e.components),d.createElement(n.Provider,{value:s},e.children)}},9105:(e,s,r)=>{r.r(s),r.d(s,{assets:()=>t,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>d,toc:()=>c});const d=JSON.parse('{"id":"testes/visao-geral","title":"Testes Unit\xe1rios da Aplica\xe7\xe3o","description":"Vis\xe3o Geral","source":"@site/docs/testes/visao-geral.md","sourceDirName":"testes","slug":"/testes/visao-geral","permalink":"/doc-performance-colaboradores-api/docs/testes/visao-geral","draft":false,"unlisted":false,"editUrl":"https://github.com/VinnyPC/doc-performance-colaboradores-api/docs/testes/visao-geral.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Testes","permalink":"/doc-performance-colaboradores-api/docs/category/testes"}}');var a=r(4848),n=r(8453);const o={sidebar_position:1},i="Testes Unit\xe1rios da Aplica\xe7\xe3o",t={},c=[{value:"Vis\xe3o Geral",id:"vis\xe3o-geral",level:2},{value:"Estrat\xe9gia de Testes",id:"estrat\xe9gia-de-testes",level:2},{value:"Configura\xe7\xe3o de Testes (<code>conftest.py</code>)",id:"configura\xe7\xe3o-de-testes-conftestpy",level:2},{value:"Estrutura Geral",id:"estrutura-geral",level:3},{value:"Banco de Dados de Teste",id:"banco-de-dados-de-teste",level:2},{value:"Exemplo de Fixture: <code>sample_colaboradores</code>",id:"exemplo-de-fixture-sample_colaboradores",level:2},{value:"Cobertura e Qualidade",id:"cobertura-e-qualidade",level:2}];function l(e){const s={blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.header,{children:(0,a.jsx)(s.h1,{id:"testes-unit\xe1rios-da-aplica\xe7\xe3o",children:"Testes Unit\xe1rios da Aplica\xe7\xe3o"})}),"\n",(0,a.jsx)(s.h2,{id:"vis\xe3o-geral",children:"Vis\xe3o Geral"}),"\n",(0,a.jsxs)(s.p,{children:["A su\xedte de testes da aplica\xe7\xe3o tem como objetivo garantir a ",(0,a.jsx)(s.strong,{children:"qualidade"}),", ",(0,a.jsx)(s.strong,{children:"consist\xeancia"})," e ",(0,a.jsx)(s.strong,{children:"corretude"})," das funcionalidades principais da API.",(0,a.jsx)(s.br,{}),"\n","Os testes s\xe3o escritos com ",(0,a.jsx)(s.strong,{children:"pytest"}),", utilizando ",(0,a.jsx)(s.strong,{children:"fixtures reutiliz\xe1veis"})," e um ",(0,a.jsx)(s.strong,{children:"banco SQLite em mem\xf3ria"})," para simular o comportamento real do banco MySQL, sem necessidade de depend\xeancias externas."]}),"\n",(0,a.jsx)(s.p,{children:"Os testes cobrem:"}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Camada de reposit\xf3rios:"})," CRUD e persist\xeancia no banco."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Camada de servi\xe7os:"})," c\xe1lculos de m\xe9dias e integra\xe7\xe3o entre entidades."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Rotas:"})," respostas HTTP e fluxo de dados."]}),"\n"]}),"\n",(0,a.jsxs)(s.blockquote,{children:["\n",(0,a.jsxs)(s.p,{children:["Todos os testes s\xe3o executados automaticamente via ",(0,a.jsx)(s.code,{children:"pytest"})," e a cobertura de c\xf3digo \xe9 medida com ",(0,a.jsx)(s.code,{children:"pytest-cov"}),"."]}),"\n"]}),"\n",(0,a.jsx)(s.hr,{}),"\n",(0,a.jsx)(s.h2,{id:"estrat\xe9gia-de-testes",children:"Estrat\xe9gia de Testes"}),"\n",(0,a.jsxs)(s.p,{children:["A estrat\xe9gia segue uma abordagem de ",(0,a.jsx)(s.strong,{children:"testes por camadas"}),", validando o comportamento individual e integrado de cada m\xf3dulo:"]}),"\n",(0,a.jsxs)(s.table,{children:[(0,a.jsx)(s.thead,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.th,{children:"Camada"}),(0,a.jsx)(s.th,{children:"Objetivo"}),(0,a.jsx)(s.th,{children:"Exemplos"})]})}),(0,a.jsxs)(s.tbody,{children:[(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.strong,{children:"Reposit\xf3rios"})}),(0,a.jsx)(s.td,{children:"Validar acesso e manipula\xe7\xe3o direta do banco."}),(0,a.jsxs)(s.td,{children:[(0,a.jsx)(s.code,{children:"test_avaliacao_desafio_repository.py"}),", ",(0,a.jsx)(s.code,{children:"test_nota_final_repository.py"})]})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.strong,{children:"Servi\xe7os"})}),(0,a.jsx)(s.td,{children:"Garantir que a l\xf3gica de neg\xf3cio (como c\xe1lculos de m\xe9dia e persist\xeancia) esteja correta."}),(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"test_avaliacao_service.py"})})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.strong,{children:"Rotas (Endpoints)"})}),(0,a.jsx)(s.td,{children:"Assegurar que as APIs respondam corretamente (status code, payload, erros)."}),(0,a.jsxs)(s.td,{children:[(0,a.jsx)(s.code,{children:"test_avaliacoes_routes.py"}),", ",(0,a.jsx)(s.code,{children:"test_nota_final_routes.py"})]})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.strong,{children:"Integra\xe7\xe3o"})}),(0,a.jsx)(s.td,{children:"Testar o fluxo completo de uma opera\xe7\xe3o."}),(0,a.jsx)(s.td,{children:"Cria\xe7\xe3o, atualiza\xe7\xe3o e dele\xe7\xe3o de avalia\xe7\xf5es."})]})]})]}),"\n",(0,a.jsxs)(s.p,{children:["A cobertura atual \xe9 de ",(0,a.jsx)(s.strong,{children:"81%"}),", com destaque para 100% em:"]}),"\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.code,{children:"colaborador_service.py"})}),"\n",(0,a.jsx)(s.li,{children:(0,a.jsx)(s.code,{children:"nota_final_service.py"})}),"\n",(0,a.jsxs)(s.li,{children:["Todas as rotas principais (",(0,a.jsx)(s.code,{children:"colaboradores"}),", ",(0,a.jsx)(s.code,{children:"notas_finais"}),", ",(0,a.jsx)(s.code,{children:"avaliacoes"}),")"]}),"\n"]}),"\n",(0,a.jsx)(s.hr,{}),"\n",(0,a.jsxs)(s.h2,{id:"configura\xe7\xe3o-de-testes-conftestpy",children:["Configura\xe7\xe3o de Testes (",(0,a.jsx)(s.code,{children:"conftest.py"}),")"]}),"\n",(0,a.jsxs)(s.p,{children:["As fixtures definidas em ",(0,a.jsx)(s.code,{children:"tests/conftest.py"})," preparam o ambiente e os dados necess\xe1rios para a execu\xe7\xe3o dos testes.",(0,a.jsx)(s.br,{}),"\n","O arquivo cria uma inst\xe2ncia do Flask, inicializa o banco de dados e gera dados de exemplo."]}),"\n",(0,a.jsx)(s.h3,{id:"estrutura-geral",children:"Estrutura Geral"}),"\n",(0,a.jsxs)(s.table,{children:[(0,a.jsx)(s.thead,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.th,{children:"Fixture"}),(0,a.jsx)(s.th,{children:"Escopo"}),(0,a.jsx)(s.th,{children:"Fun\xe7\xe3o"})]})}),(0,a.jsxs)(s.tbody,{children:[(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"app"})}),(0,a.jsx)(s.td,{children:"m\xf3dulo"}),(0,a.jsxs)(s.td,{children:["Cria e configura a aplica\xe7\xe3o Flask em modo de teste (",(0,a.jsx)(s.code,{children:"TESTING=True"}),")."]})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"client"})}),(0,a.jsx)(s.td,{children:"fun\xe7\xe3o"}),(0,a.jsx)(s.td,{children:"Fornece um cliente HTTP para simular requisi\xe7\xf5es \xe0s rotas."})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"db_session"})}),(0,a.jsx)(s.td,{children:"fun\xe7\xe3o"}),(0,a.jsx)(s.td,{children:"Cria uma sess\xe3o de banco SQLite isolada para cada teste."})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"sample_colaboradores"})}),(0,a.jsx)(s.td,{children:"fun\xe7\xe3o"}),(0,a.jsx)(s.td,{children:"Insere colaboradores fict\xedcios no banco."})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"sample_avaliacao_comportamental"})}),(0,a.jsx)(s.td,{children:"fun\xe7\xe3o"}),(0,a.jsx)(s.td,{children:"Gera uma avalia\xe7\xe3o comportamental de exemplo."})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"sample_avaliacao_desafio"})}),(0,a.jsx)(s.td,{children:"fun\xe7\xe3o"}),(0,a.jsx)(s.td,{children:"Gera uma avalia\xe7\xe3o de desafios de exemplo."})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.code,{children:"sample_notas_finais"})}),(0,a.jsx)(s.td,{children:"fun\xe7\xe3o"}),(0,a.jsx)(s.td,{children:"Insere notas finais de colaboradores para testes de agrega\xe7\xe3o."})]})]})]}),"\n",(0,a.jsx)(s.hr,{}),"\n",(0,a.jsx)(s.h2,{id:"banco-de-dados-de-teste",children:"Banco de Dados de Teste"}),"\n",(0,a.jsxs)(s.p,{children:["O banco de testes utiliza uma inst\xe2ncia ",(0,a.jsx)(s.strong,{children:"SQLite em mem\xf3ria"})," (",(0,a.jsx)(s.code,{children:"sqlite:///:memory:"}),") configurada dinamicamente via ",(0,a.jsx)(s.code,{children:"app.config"}),".",(0,a.jsx)(s.br,{}),"\n","Durante cada teste:"]}),"\n",(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsxs)(s.li,{children:["O schema completo \xe9 criado via ",(0,a.jsx)(s.code,{children:"db.create_all()"}),"."]}),"\n",(0,a.jsx)(s.li,{children:"Os dados s\xe3o inseridos pelas fixtures."}),"\n",(0,a.jsx)(s.li,{children:"O teste \xe9 executado."}),"\n",(0,a.jsxs)(s.li,{children:["A transa\xe7\xe3o \xe9 revertida (",(0,a.jsx)(s.code,{children:"rollback"}),") e a conex\xe3o \xe9 fechada."]}),"\n"]}),"\n",(0,a.jsxs)(s.p,{children:["Isso garante que ",(0,a.jsx)(s.strong,{children:"cada teste comece com o banco limpo"}),", mantendo isolamento e previsibilidade."]}),"\n",(0,a.jsx)(s.hr,{}),"\n",(0,a.jsxs)(s.h2,{id:"exemplo-de-fixture-sample_colaboradores",children:["Exemplo de Fixture: ",(0,a.jsx)(s.code,{children:"sample_colaboradores"})]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-python",children:'@pytest.fixture\ndef sample_colaboradores(db_session):\n    c1 = Colaborador(matricula="001", nome="Ana Silva", data_admissao=datetime.date(2025,1,1), cargo="Analista")\n    c2 = Colaborador(matricula="002", nome="Bruno Souza", data_admissao=datetime.date(2025,2,1), cargo="Desenvolvedor")\n    db_session.add_all([c1, c2])\n    db_session.commit()\n    return [c1, c2]\n\nEssa fixture:\n\n* Insere dois colaboradores no banco;\n* Permite reutiliza\xe7\xe3o em testes de reposit\xf3rio e servi\xe7o;\n* Garante que os IDs e dados estejam dispon\xedveis para avalia\xe7\xf5es e notas finais.\n\n---\n\n## Execu\xe7\xe3o dos Testes\n\nPara rodar todos os testes com cobertura:\n\n```bash\npytest --cov=app --cov-report=term-missing\n'})}),"\n",(0,a.jsx)(s.p,{children:"Para rodar apenas os testes de uma categoria espec\xedfica (ex: servi\xe7os):"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"pytest tests/services/ -v\n"})}),"\n",(0,a.jsx)(s.p,{children:"Para verificar o tempo de execu\xe7\xe3o:"}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"pytest --durations=10\n"})}),"\n",(0,a.jsx)(s.hr,{}),"\n",(0,a.jsx)(s.h2,{id:"cobertura-e-qualidade",children:"Cobertura e Qualidade"}),"\n",(0,a.jsx)(s.p,{children:"A cobertura atual do projeto:"}),"\n",(0,a.jsxs)(s.table,{children:[(0,a.jsx)(s.thead,{children:(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.th,{children:"Camada"}),(0,a.jsx)(s.th,{children:"Cobertura"})]})}),(0,a.jsxs)(s.tbody,{children:[(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.strong,{children:"Models"})}),(0,a.jsx)(s.td,{children:"100%"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.strong,{children:"Services"})}),(0,a.jsx)(s.td,{children:"85\u2013100%"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.strong,{children:"Routes"})}),(0,a.jsx)(s.td,{children:"90\u2013100%"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.strong,{children:"Repositories"})}),(0,a.jsx)(s.td,{children:"30\u2013100%"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.strong,{children:"Schemas"})}),(0,a.jsx)(s.td,{children:"80%"})]}),(0,a.jsxs)(s.tr,{children:[(0,a.jsx)(s.td,{children:(0,a.jsx)(s.strong,{children:"Utils"})}),(0,a.jsx)(s.td,{children:"86%"})]})]})]}),"\n",(0,a.jsxs)(s.blockquote,{children:["\n",(0,a.jsxs)(s.p,{children:["O objetivo \xe9 manter acima de ",(0,a.jsx)(s.strong,{children:"85% de cobertura total"}),", priorizando as camadas de ",(0,a.jsx)(s.strong,{children:"servi\xe7o"})," e ",(0,a.jsx)(s.strong,{children:"rotas"})," (que concentram a l\xf3gica de neg\xf3cio e interface p\xfablica da API)."]}),"\n"]}),"\n",(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{})})]})}function h(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(l,{...e})}):l(e)}}}]);