"use strict";(globalThis.webpackChunkdoc_performance_colaboradores_api=globalThis.webpackChunkdoc_performance_colaboradores_api||[]).push([[4626],{8453:(a,e,i)=>{i.d(e,{R:()=>n,x:()=>r});var s=i(6540);const o={},l=s.createContext(o);function n(a){const e=s.useContext(l);return s.useMemo(function(){return"function"==typeof a?a(e):{...e,...a}},[e,a])}function r(a){let e;return e=a.disableParentContext?"function"==typeof a.components?a.components(o):a.components||o:n(a.components),s.createElement(l.Provider,{value:e},a.children)}},9199:(a,e,i)=>{i.r(e),i.d(e,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>n,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"servicos/avaliacao-servico","title":"Servi\xe7o de Avalia\xe7\xe3o","description":"Vis\xe3o Geral","source":"@site/docs/servicos/avaliacao-servico.md","sourceDirName":"servicos","slug":"/servicos/avaliacao-servico","permalink":"/doc-performance-colaboradores-api/docs/servicos/avaliacao-servico","draft":false,"unlisted":false,"editUrl":"https://github.com/VinnyPC/doc-performance-colaboradores-api/docs/servicos/avaliacao-servico.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Vis\xe3o Geral","permalink":"/doc-performance-colaboradores-api/docs/servicos/visao-geral"},"next":{"title":"Servi\xe7o de Nota Final","permalink":"/doc-performance-colaboradores-api/docs/servicos/nota-final-servico"}}');var o=i(4848),l=i(8453);const n={sidebar_position:2},r="Servi\xe7o de Avalia\xe7\xe3o",d={},c=[{value:"Vis\xe3o Geral",id:"vis\xe3o-geral",level:2},{value:"Principais Responsabilidades",id:"principais-responsabilidades",level:2},{value:"Fluxo do <code>salvar_avaliacao</code>",id:"fluxo-do-salvar_avaliacao",level:2},{value:"Fluxo do <code>atualizar_avaliacao</code>",id:"fluxo-do-atualizar_avaliacao",level:2},{value:"Fluxo do <code>deletar_avaliacao_por_nota_final</code>",id:"fluxo-do-deletar_avaliacao_por_nota_final",level:2},{value:"C\xe1lculos Realizados",id:"c\xe1lculos-realizados",level:2},{value:"Logs Utilizados",id:"logs-utilizados",level:2},{value:"Depend\xeancias internas",id:"depend\xeancias-internas",level:2}];function t(a){const e={blockquote:"blockquote",br:"br",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...a.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"servi\xe7o-de-avalia\xe7\xe3o",children:"Servi\xe7o de Avalia\xe7\xe3o"})}),"\n",(0,o.jsx)(e.h2,{id:"vis\xe3o-geral",children:"Vis\xe3o Geral"}),"\n",(0,o.jsxs)(e.p,{children:["O ",(0,o.jsx)(e.strong,{children:"service de avalia\xe7\xe3o"})," \xe9 o n\xfacleo respons\xe1vel por coordenar toda a l\xf3gica de neg\xf3cio relacionada \xe0s avalia\xe7\xf5es comportamentais e de desafios dos colaboradores.",(0,o.jsx)(e.br,{}),"\n","Ele centraliza as opera\xe7\xf5es de ",(0,o.jsx)(e.strong,{children:"cria\xe7\xe3o, atualiza\xe7\xe3o, exclus\xe3o e c\xe1lculo de m\xe9dias"}),", interagindo com os reposit\xf3rios e o banco de dados."]}),"\n",(0,o.jsx)(e.p,{children:"Este servi\xe7o garante a consist\xeancia entre:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsxs)(e.li,{children:["As tabelas de avalia\xe7\xf5es (",(0,o.jsx)(e.code,{children:"tb_avaliacao_comportamental"})," e ",(0,o.jsx)(e.code,{children:"tb_avaliacao_desafio"}),");"]}),"\n",(0,o.jsxs)(e.li,{children:["Os itens de cada avalia\xe7\xe3o (",(0,o.jsx)(e.code,{children:"tb_avaliacao_comportamental_item"})," e ",(0,o.jsx)(e.code,{children:"tb_avaliacao_desafio_item"}),");"]}),"\n",(0,o.jsxs)(e.li,{children:["A tabela de notas finais (",(0,o.jsx)(e.code,{children:"tb_nota_final"}),")."]}),"\n"]}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsx)(e.h2,{id:"principais-responsabilidades",children:"Principais Responsabilidades"}),"\n",(0,o.jsxs)(e.table,{children:[(0,o.jsx)(e.thead,{children:(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.th,{children:"Fun\xe7\xe3o"}),(0,o.jsx)(e.th,{children:"Descri\xe7\xe3o"})]})}),(0,o.jsxs)(e.tbody,{children:[(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"salvar_avaliacao(data)"})}),(0,o.jsx)(e.td,{children:"Cria uma nova avalia\xe7\xe3o comportamental e de desafios. Calcula as m\xe9dias individuais e a nota final. Persiste os dados no banco."})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"atualizar_avaliacao(avaliacao_id, data)"})}),(0,o.jsx)(e.td,{children:"Atualiza avalia\xe7\xf5es existentes (itens comportamentais e/ou desafios). Recalcula m\xe9dias e atualiza a nota final."})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"deletar_avaliacao_por_nota_final(nota_final_id)"})}),(0,o.jsx)(e.td,{children:"Remove a avalia\xe7\xe3o completa (comportamental, desafio e nota final) a partir do ID da nota final."})]})]})]}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsxs)(e.h2,{id:"fluxo-do-salvar_avaliacao",children:["Fluxo do ",(0,o.jsx)(e.code,{children:"salvar_avaliacao"})]}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsxs)(e.li,{children:["Recebe os dados do corpo da requisi\xe7\xe3o (",(0,o.jsx)(e.code,{children:"matricula"}),", ",(0,o.jsx)(e.code,{children:"data_avaliacao"}),", ",(0,o.jsx)(e.code,{children:"comportamental"}),", ",(0,o.jsx)(e.code,{children:"desafios"}),")."]}),"\n",(0,o.jsxs)(e.li,{children:["Valida a matr\xedcula e busca o ",(0,o.jsx)(e.code,{children:"colaborador_id"})," no banco de dados."]}),"\n",(0,o.jsxs)(e.li,{children:["Calcula:","\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"M\xe9dia comportamental (4 quest\xf5es);"}),"\n",(0,o.jsx)(e.li,{children:"M\xe9dia de desafios (2 a 4 desafios);"}),"\n",(0,o.jsx)(e.li,{children:"M\xe9dia final (m\xe9dia entre as duas anteriores)."}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(e.li,{children:"Persiste as m\xe9dias e os itens nas tabelas correspondentes."}),"\n",(0,o.jsxs)(e.li,{children:["Cria o registro na tabela ",(0,o.jsx)(e.code,{children:"tb_nota_final"}),"."]}),"\n",(0,o.jsx)(e.li,{children:"Retorna as m\xe9dias calculadas."}),"\n"]}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsxs)(e.h2,{id:"fluxo-do-atualizar_avaliacao",children:["Fluxo do ",(0,o.jsx)(e.code,{children:"atualizar_avaliacao"})]}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsxs)(e.li,{children:["Localiza a avalia\xe7\xe3o comportamental pelo ",(0,o.jsx)(e.code,{children:"avaliacao_id"}),"."]}),"\n",(0,o.jsxs)(e.li,{children:["Se o payload cont\xe9m ",(0,o.jsx)(e.code,{children:'"comportamental"'}),", atualiza os itens e recalcula a m\xe9dia."]}),"\n",(0,o.jsxs)(e.li,{children:["Se o payload cont\xe9m ",(0,o.jsx)(e.code,{children:'"desafios"'}),", busca a avalia\xe7\xe3o de desafios pelo ",(0,o.jsx)(e.code,{children:"colaborador_id"})," + ",(0,o.jsx)(e.code,{children:"data_avaliacao"}),", atualiza itens e recalcula m\xe9dia."]}),"\n",(0,o.jsx)(e.li,{children:"Atualiza a nota final com as novas m\xe9dias."}),"\n",(0,o.jsx)(e.li,{children:"Retorna um resumo das m\xe9dias atualizadas."}),"\n"]}),"\n",(0,o.jsxs)(e.blockquote,{children:["\n",(0,o.jsx)(e.p,{children:"Caso a avalia\xe7\xe3o de desafios n\xe3o exista para a data informada, o sistema retorna:"}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-json",children:'{"error": "Avalia\xe7\xe3o de desafios n\xe3o encontrada"}\n'})}),"\n"]}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsxs)(e.h2,{id:"fluxo-do-deletar_avaliacao_por_nota_final",children:["Fluxo do ",(0,o.jsx)(e.code,{children:"deletar_avaliacao_por_nota_final"})]}),"\n",(0,o.jsxs)(e.ol,{children:["\n",(0,o.jsxs)(e.li,{children:["Busca o registro da nota final pelo ",(0,o.jsx)(e.code,{children:"nota_final_id"}),"."]}),"\n",(0,o.jsxs)(e.li,{children:["Caso exista, deleta:","\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Os itens e o registro da avalia\xe7\xe3o comportamental;"}),"\n",(0,o.jsx)(e.li,{children:"Os itens e o registro da avalia\xe7\xe3o de desafio;"}),"\n",(0,o.jsx)(e.li,{children:"O registro de nota final."}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(e.li,{children:["Em caso de erro, realiza ",(0,o.jsx)(e.code,{children:"rollback"})," e registra logs no sistema."]}),"\n"]}),"\n",(0,o.jsx)(e.hr,{}),"\n",(0,o.jsx)(e.h2,{id:"c\xe1lculos-realizados",children:"C\xe1lculos Realizados"}),"\n",(0,o.jsxs)(e.p,{children:["Os c\xe1lculos utilizam o helper ",(0,o.jsx)(e.code,{children:"calcular_media"}),":"]}),"\n",(0,o.jsx)(e.pre,{children:(0,o.jsx)(e.code,{className:"language-python",children:"def calcular_media(valores):\n    return round(sum(valores) / len(valores), 2) if valores else 0\n"})}),"\n",(0,o.jsx)(e.p,{children:"Esse c\xe1lculo \xe9 aplicado tanto para:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"Quest\xf5es comportamentais (1 a 5);"}),"\n",(0,o.jsx)(e.li,{children:"Desafios de entrega (1 a 5)."}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"logs-utilizados",children:"Logs Utilizados"}),"\n",(0,o.jsx)(e.p,{children:"O service utiliza o Loguru para registrar opera\xe7\xf5es:"}),"\n",(0,o.jsxs)(e.ul,{children:["\n",(0,o.jsx)(e.li,{children:"logger.info \u2192 etapas de processamento;"}),"\n",(0,o.jsx)(e.li,{children:"logger.error \u2192 erros de valida\xe7\xe3o e inconsist\xeancias;"}),"\n",(0,o.jsx)(e.li,{children:"logger.success \u2192 confirma\xe7\xf5es de opera\xe7\xe3o bem-sucedida;"}),"\n",(0,o.jsx)(e.li,{children:"logger.exception \u2192 falhas cr\xedticas com rastreamento detalhado."}),"\n"]}),"\n",(0,o.jsx)(e.h2,{id:"depend\xeancias-internas",children:"Depend\xeancias internas"}),"\n",(0,o.jsxs)(e.table,{children:[(0,o.jsx)(e.thead,{children:(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.th,{children:"M\xf3dulo"}),(0,o.jsx)(e.th,{children:"Fun\xe7\xe3o"})]})}),(0,o.jsxs)(e.tbody,{children:[(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"colaborador_repository"})}),(0,o.jsx)(e.td,{children:"Busca o ID do colaborador pela matr\xedcula."})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"avaliacao_comportamental_repository"})}),(0,o.jsx)(e.td,{children:"Gerencia avalia\xe7\xf5es comportamentais."})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"avaliacao_desafio_repository"})}),(0,o.jsx)(e.td,{children:"Gerencia avalia\xe7\xf5es de desafios."})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"avaliacao_comportamental_item_repository"})}),(0,o.jsx)(e.td,{children:"Atualiza e deleta itens comportamentais."})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"avaliacao_desafio_item_repository"})}),(0,o.jsx)(e.td,{children:"Atualiza e deleta itens de desafios."})]}),(0,o.jsxs)(e.tr,{children:[(0,o.jsx)(e.td,{children:(0,o.jsx)(e.code,{children:"nota_final_repository"})}),(0,o.jsx)(e.td,{children:"Persiste e atualiza notas finais."})]})]})]})]})}function h(a={}){const{wrapper:e}={...(0,l.R)(),...a.components};return e?(0,o.jsx)(e,{...a,children:(0,o.jsx)(t,{...a})}):t(a)}}}]);